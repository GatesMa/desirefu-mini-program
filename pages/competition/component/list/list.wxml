<!--pages/competition/component/list/list.wxml-->
<cu-custom bgColor="tx-blue" isBack="{{true}}">
  <view slot="backText">æ¯”èµ›ç®¡ç†</view>
</cu-custom>

<view class="padding  text-center text-grey bg-white shadow-warp">
  <view class="flex">
    <view class="flex flex-sub flex-direction solid-right">
      <view class="text-xxl text-orange">12</view>
      <view class="margin-top-sm">
        <text class="cuIcon-all"></text> å…¨éƒ¨</view>
    </view>
    <view class="flex flex-sub flex-direction solid-right">
      <view class="text-xxl text-blue">10</view>
      <view class="margin-top-sm">
        <text class="cuIcon-hot"></text> æœ‰æ•ˆ</view>
    </view>
    <view class="flex flex-sub flex-direction">
      <view class="text-xxl text-green">1004</view>
      <view class="margin-top-sm">
        <text class="cuIcon-attentionfill"></text> æµè§ˆ</view>
    </view>
  </view>
  <view class="flex margin-top-sm">
    <view class="flex flex-sub flex-direction solid-right">
      <view class="text-xxl text-yellow">5</view>
      <view class="margin-top-sm">æœªå¼€å§‹</view>
    </view>
    <view class="flex flex-sub flex-direction solid-right">
      <view class="text-xxl text-olive">5</view>
      <view class="margin-top-sm">è¿›è¡Œä¸­</view>
    </view>
    <view class="flex flex-sub flex-direction">
      <view class="text-xxl text-gray">2</view>
      <view class="margin-top-sm">å·²ç»“æŸ</view>
    </view>
  </view>
</view>

<!-- ç­›é€‰ç»„ -->
<view class="padding-top padding-bottom-xs solid-bottom">
  <!-- ç¬¬ä¸€æ’ -->
  <view class="padding-left padding-right cu-bar">
    <button class="cu-btn round text-xs text-grey padding-top-xm line-grey" bindtap="showModal" data-target="state"
      style="height:65rpx">
      <text class="cuIcon-unfold"></text>çŠ¶æ€ï¼š{{stateName}}
    </button>
    <button class="cu-btn round text-xs text-grey margin-left-sm padding-top-xm line-grey" bindtap="showModal" data-target="type"
      style="height:65rpx">
      <text class="cuIcon-unfold"></text>ç­‰çº§ï¼š{{typeName}}
    </button>
    <button class="cu-btn round text-xs text-grey margin-left-sm padding-top-xm line-grey" bindtap="showModal" data-target="sort"
      style="height:65rpx">
      <text class="cuIcon-unfold"></text>æ’åº
    </button>
    <button class="cu-btn round text-xs text-blue margin-left-sm padding-top-xm line-blue" bindtap="fillCompetitions"
      style="height:65rpx">æœç´¢ğŸ”</button>
  </view>

  <!-- ç¬¬äºŒæ’ -->
  <view class="flex">
    <view class="flex-sub cu-bar search">
      <view class="search-form round">
        <text class="text-xs padding-left-sm text-grey solid">æ¯”èµ›åç§°ï¼š</text>
        <input type="text" class="text-xs" data-title='title' bindinput='titleinput' placeholder="-"></input>
      </view>
    </view>
    <view class="flex-sub cu-bar search">
      <view class="search-form round">
        <text class="text-xs padding-left-sm text-grey solid">ä¸¾åŠæ–¹ï¼š</text>
        <input type="text" class="text-xs" data-title='founder' bindinput='founderinput' placeholder="-"></input>
      </view>
    </view>
  </view>
  <!-- ç¬¬ä¸‰æ’ -->
  <view class="flex  p-xs margin-left margin-right margin-top-sm margin-bottom">
    <view class="flex-sub radius">
      <button class="cu-btn round text-xs text-grey line-grey" bindtap="showModal" data-target="status" style="height:65rpx">
        <text class="cuIcon-unfold"></text>æ˜¯å¦è‰ç¨¿ï¼š{{statusName}}
      </button>
    </view>
  </view>

</view>



<!-- model -->
<!-- çŠ¶æ€ -->
<view class="cu-modal bottom-modal {{modalName=='state'?'show':''}}" bindtap="hideModal">
  <view class="cu-dialog">
    <view class="cu-list menu radius shadow-warp bg-white">
      <view class="cu-item" wx:for="{{stateList}}" wx:key="state" data-item="{{item}}" catchtap="chooseState">
        <view class="content">
          <text class="text-grey text-xs">{{item.stateName}}</text>
        </view>
      </view>
    </view>
  </view>
</view>

<!-- ç­‰çº§ -->
<view class="cu-modal bottom-modal {{modalName=='type'?'show':''}}" bindtap="hideModal">
  <view class="cu-dialog">
    <view class="cu-list menu radius shadow-warp bg-white">
      <view class="cu-item" wx:for="{{typeList}}" wx:key="state" data-item="{{item}}" catchtap="chooseType">
        <view class="content">
          <text class="text-grey text-xs">{{item.typeName}}</text>
        </view>
      </view>
    </view>
  </view>
</view>

<!-- æ’åº -->
<view class="cu-modal bottom-modal {{modalName=='sort'?'show':''}}" bindtap="hideModal">
  <view class="cu-dialog">
    <view class="cu-list menu radius shadow-warp bg-white">
      <view class="cu-item" wx:for="{{sortList}}" wx:key="state" data-item="{{item}}" catchtap="chooseSort">
        <view class="content">
          <text class="text-grey text-xs">{{item.name}}</text>
        </view>
      </view>
    </view>
  </view>
</view>

<!-- status -->
<view class="cu-modal bottom-modal {{modalName=='status'?'show':''}}" bindtap="hideModal">
  <view class="cu-dialog">
    <view class="cu-list menu radius shadow-warp bg-white">
      <view class="cu-item" wx:for="{{statusList}}" wx:key="status" data-item="{{item}}" catchtap="chooseStatus">
        <view class="content">
          <text class="text-grey text-xs">{{item.statusName}}</text>
        </view>
      </view>
    </view>
  </view>
</view>

<!-- å¡ç‰‡ -->
<view class="cu-card article ">
  <view class="cu-item shadow solid-bottom" wx:for="{{competitions}}" wx:key="competition_id" wx:for-index="idx"
    wx:for-item="item" bindtap="navToPreview" data-item="{{item}}">
    <view class="title">
      <view class="text-cut">{{item.title}}</view>
    </view>
    <view class="content">
      <image wx:if="{{item.overview_img}}" src="{{item.overview_img}}" mode="aspectFill"></image>
      <view class="desc">
        <view class="text-content">{{item.overview_text}}</view>
        <!-- æ ‡ç­¾ -->
        <view>
          <view wx:if="{{item.type==4}}" class="cu-tag bg-red light sm round">å›½é™…çº§</view>
          <view wx:elif="{{item.type==3}}" class="cu-tag bg-orange light sm round">å›½å®¶çº§</view>
          <view wx:elif="{{item.type==2}}" class="cu-tag bg-blue light sm round">çœçº§</view>
          <view wx:elif="{{item.type==1}}" class="cu-tag bg-green light sm round">æ ¡çº§</view>
          <view wx:elif="{{item.type==0}}" class="cu-tag bg-brown light sm round">é™¢çº§</view>
        </view>
      </view>
    </view>
    <view class="flex padding-top padding-left justify-between">
      <view class="text-gray text-sm">
        {{item.created_ime}}
      </view>
      <view class="text-gray text-sm text-right">
        <text class="cuIcon-attentionfill margin-lr-xs"></text>{{item.pv}}
      </view>
    </view>
  </view>
</view>

<!-- ç¿»é¡µæŒ‰é’® -->
<view class="flex solid-bottom padding justify-between">
  <button class="cu-btn padding-sm margin-xs radius text-gray text-sm" bindtap="scrollBack">
    <text class="cuIcon-back"></text>ä¸Šä¸€é¡µ
  </button>
  <button class="cu-btn padding-sm margin-xs radius text-gray text-sm" bindtap="scrollFront">
    <text class="cuIcon-right"></text>ä¸‹ä¸€é¡µ
  </button>
</view>